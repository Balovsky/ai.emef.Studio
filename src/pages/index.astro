---
// Plik: src/pages/index.astro
import MainLayout from '../layouts/MainLayout.astro';
import MagicShowcase from '../components/MagicShowcase.astro';
import BeforeAfter from '../components/BeforeAfter.astro';
---

<MainLayout title="Studio.AI | Fotografia E-commerce Nowej Generacji">

    <header class="relative pt-32 pb-20 lg:pt-32 lg:pb-32 px-4 overflow-hidden bg-slate-900 text-white min-h-[85vh] flex items-center justify-center">
        
        <div class="absolute inset-0 z-0 w-full h-full">
            <video 
                class="w-full h-full object-cover" 
                autoplay 
                loop 
                muted 
                playsinline 
            >
                <source src="/video/home4.mp4" type="video/mp4" />
            </video>
            <div class="absolute inset-0 bg-black/60"></div>
            <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-black to-transparent"></div>
        </div>

        <div class="relative z-10 max-w-5xl mx-auto text-center">
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight" data-aos="fade-up">
                Tworzymy wizualną stronę <br/>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">e-commerce, która sprzedaje.</span>
            </h1>
            <p class="text-xl text-gray-200 max-w-2xl mx-auto mb-10 font-light" data-aos="fade-up" data-aos-delay="100">
                Od packshotu, przez AI, aż po skalowanie sprzedaży. Łączymy precyzję fotografii z technologią.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center" data-aos="fade-up" data-aos-delay="200">
                <a href="#portfolio" class="px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition shadow-lg hover:shadow-white/20 transform hover:-translate-y-1">
                    Zobacz realizacje
                </a>
                <a href="#kontakt" class="px-8 py-4 border border-white/30 backdrop-blur-md text-white font-bold rounded-full hover:bg-white/10 transition transform hover:-translate-y-1">
                    Wycena projektu
                </a>
            </div>
        </div>
    </header>

    <section class="py-12 bg-black text-white border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div class="opacity-0 auto-fade-up" style="animation-delay: 1000ms;">
                <div class="text-4xl font-bold text-blue-500">15 000+</div>
                <div class="text-sm text-gray-400 uppercase tracking-wider mt-1">Packshotów</div>
            </div>
            <div class="opacity-0 auto-fade-up" style="animation-delay: 1100ms;">
                <div class="text-4xl font-bold text-purple-500">1200%</div>
                <div class="text-sm text-gray-400 uppercase tracking-wider mt-1">Wzrost sprzedaży</div>
            </div>
            <div class="opacity-0 auto-fade-up" style="animation-delay: 1200ms;">
                <div class="text-4xl font-bold text-green-500">20+</div>
                <div class="text-sm text-gray-400 uppercase tracking-wider mt-1">Sesji Modowych</div>
            </div>
            <div class="opacity-0 auto-fade-up" style="animation-delay: 1300ms;">
                <div class="text-4xl font-bold text-orange-500">AI</div>
                <div class="text-sm text-gray-400 uppercase tracking-wider mt-1">Technologia</div>
            </div>
        </div>
    </section>

    <style>
        @keyframes customFadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .auto-fade-up {
            animation-name: customFadeUp;
            animation-duration: 0.8s;
            animation-fill-mode: forwards;
            animation-timing-function: ease-out;
        }
    </style>

    <section id="oferta" class="py-24 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <span class="text-blue-600 font-bold tracking-wider text-sm uppercase">Pełna Oferta</span>
                <h2 class="text-3xl md:text-5xl font-bold mt-2 mb-4" data-aos="fade-up">Więcej niż fotografia</h2>
                <p class="text-gray-600 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    Zdejmujemy Ci z głowy cały proces wizualny i techniczny. Od surowego zdjęcia po gotowy produkt.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:-translate-y-1 transition group" data-aos="fade-up">
                    <div class="w-12 h-12 bg-orange-50 text-orange-600 rounded-lg flex items-center justify-center mb-4 group-hover:bg-orange-600 group-hover:text-white transition">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Opisy SEO</h3>
                    <p class="text-xs text-gray-500">Tworzymy unikalne, sprzedażowe opisy produktów pozycjonujące sklep.</p>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:-translate-y-1 transition group" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-12 h-12 bg-green-50 text-green-600 rounded-lg flex items-center justify-center mb-4 group-hover:bg-green-600 group-hover:text-white transition">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Obsługa Sklepu</h3>
                    <p class="text-xs text-gray-500">Wprowadzanie produktów i zarządzanie sklepem.</p>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:-translate-y-1 transition group" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-4 group-hover:bg-blue-600 group-hover:text-white transition">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Packshoty Premium</h3>
                    <p class="text-xs text-gray-500">Zdjęcia na idealnie białym tle.</p>
                </div>

                </div>
        </div>
    </section>

    <section id="technologia" class="py-24 bg-white overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 text-center mb-16">
            <h2 class="text-3xl md:text-5xl font-bold mb-4" data-aos="fade-up">Magia czy Technologia?</h2>
            <p class="text-gray-600 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                Jeden produkt, nieskończone możliwości.
            </p>
        </div>
        <div class="px-4" data-aos="fade-up" data-aos-duration="1000">
             <MagicShowcase />
        </div>
    </section>

    <section id="koszty" class="py-24 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-5xl font-bold mb-6" data-aos="fade-up">Policzmy to uczciwie.</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100">
                    Oszczędność budżetu przy zachowaniu jakości agencyjnej.
                </p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 items-stretch">
                 </div>
        </div>
    </section>

    <section id="kontakt" class="py-24 bg-slate-900 text-white relative overflow-hidden">
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-blue-600 rounded-full blur-3xl opacity-20"></div>
        <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-purple-600 rounded-full blur-3xl opacity-20"></div>

        <div class="max-w-xl mx-auto px-4 relative z-10">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Masz projekt?</h2>
                <p class="text-gray-400 mb-2">
                    Działamy stacjonarnie: <strong>Kalwaria Zebrzydowska / Wadowice</strong>.<br/>
                    Obsługujemy zdalnie całą Polskę.
                </p>
                <p class="text-gray-500 text-sm">Opisz nam swoje potrzeby. Przygotujemy darmową wycenę w 24h.</p>
            </div>

            <form id="home-contact-form" name="kontakt-glowna" method="POST" data-netlify="true" class="space-y-4 bg-white/5 p-8 rounded-2xl backdrop-blur-sm border border-white/10" data-aos="zoom-in">
                
                <input type="hidden" name="form-name" value="kontakt-glowna" />

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Imię</label>
                        <input type="text" name="imie" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:outline-none focus:border-blue-500 transition" placeholder="Jan Kowalski" required>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Email</label>
                        <input type="email" name="email" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:outline-none focus:border-blue-500 transition" placeholder="jan@firma.pl" required>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-2">O czym chcesz porozmawiać?</label>
                    <div class="relative">
                        <select name="temat" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:outline-none focus:border-blue-500 transition appearance-none" required>
                            <option value="" disabled selected>-- Wybierz temat --</option>
                            <option value="Packshoty">Packshoty Produktowe</option>
                            <option value="Sesja AI">Sesja Wizerunkowa / AI</option>
                            <option value="Wideo">Wideo / Reels</option>
                            <option value="Inne">Inne</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-400">▼</div>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Wiadomość</label>
                    <textarea name="wiadomosc" rows="4" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:outline-none focus:border-blue-500 transition" placeholder="Napisz krótko o produktach i ilości zdjęć..." required></textarea>
                </div>

                <button id="home-submit-btn" type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-4 rounded-lg hover:shadow-lg hover:shadow-blue-500/30 transition transform hover:-translate-y-1">
                    Wyślij zapytanie
                </button>
                <p class="text-xs text-center text-gray-500 mt-4">Klikając wyślij, akceptujesz politykę prywatności.</p>
            </form>
        </div>
    </section>

    <div id="home-toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 translate-y-32 opacity-0 z-50 max-w-[90vw] w-auto bg-white border border-green-100 shadow-2xl rounded-2xl p-4 md:p-6 flex items-center gap-4 transition-all duration-500 pointer-events-none">
        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center shrink-0">
            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <div>
            <h4 class="font-bold text-gray-900 text-sm md:text-base">Wiadomość wysłana!</h4>
            <p class="text-xs md:text-sm text-gray-500 mt-1">Dziękujemy. Wrócimy do Ciebie w 24h.</p>
        </div>
    </div>

</MainLayout>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('home-contact-form');
        const toast = document.getElementById('home-toast');
        const btn = document.getElementById('home-submit-btn');

        if (form) {
            form.addEventListener('submit', (e) => {
                e.preventDefault(); // Stop przeładowania

                const myForm = e.target as HTMLFormElement;
                const formData = new FormData(myForm);

                // --- ZABEZPIECZENIE: DODAJEMY FORM-NAME JEŚLI BRAK ---
                if (!formData.has('form-name')) {
                    formData.append('form-name', myForm.getAttribute('name'));
                }

                // Zapisujemy tekst przycisku
                let originalText = "Wyślij zapytanie";
                if(btn) {
                    originalText = btn.innerText;
                    btn.innerText = "Wysyłanie...";
                    btn.style.opacity = "0.7";
                    // @ts-ignore
                    btn.disabled = true;
                }

                // --- SPOSÓB KTÓRY DZIAŁAŁ U CIEBIE (URLSearchParams) ---
                // Ta metoda jest bezpieczna dla formularzy bez plików!
                fetch('/', {
                    method: 'POST',
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    // @ts-ignore
                    body: new URLSearchParams(formData).toString()
                })
                .then(() => {
                    // 1. Reset formularza
                    myForm.reset();
                    
                    // 2. Pokaż Toast
                    if(toast) {
                        toast.classList.remove('translate-y-32', 'opacity-0', 'pointer-events-none');
                        setTimeout(() => {
                            toast.classList.add('translate-y-32', 'opacity-0', 'pointer-events-none');
                        }, 5000);
                    }

                    // 3. Reset przycisku
                    if(btn) {
                        btn.innerText = "Wysłano pomyślnie!";
                        btn.style.backgroundColor = "#10B981"; // Zielony
                        setTimeout(() => {
                            btn.innerText = originalText;
                            btn.style.backgroundColor = ""; 
                            btn.style.opacity = "1";
                            // @ts-ignore
                            btn.disabled = false;
                        }, 3000);
                    }
                })
                .catch((error) => {
                    alert('Błąd wysyłania. Spróbuj ponownie.');
                    console.error(error);
                    if(btn) {
                        btn.innerText = originalText;
                        btn.style.opacity = "1";
                        // @ts-ignore
                        btn.disabled = false;
                    }
                });
            });
        }
    });
</script>